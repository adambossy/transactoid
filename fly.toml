# Fly.io configuration for Transactoid report job
# This is a scheduled job, not a web service

app = "transactoid"
primary_region = "iad"  # US East - close to Supabase

[build]
  dockerfile = "Dockerfile"

[env]
  PYTHONUNBUFFERED = "1"

# No HTTP service - this is a scheduled job
# The machine will start, run the report command, and exit

# Machine configuration for the job
# Use the smallest machine size since this is an infrequent job
[[vm]]
  size = "shared-cpu-1x"
  memory = "512mb"

# To run manually:
#   fly machine run transactoid --entrypoint "transactoid report"

# To schedule (7 AM UTC daily):
#   fly machine run transactoid \
#     --schedule "0 7 * * *" \
#     --entrypoint "transactoid report"

# Alternative: Use Fly Cron Manager for more control
# See: https://fly.io/docs/blueprints/task-scheduling/
