{"id":"fly-6nt","title":"Refactor report flow into core agent_run service","description":"Move thick run/report orchestration out of ui/cli.py into core service modules. Establish agent-run as canonical execution path with report as compatibility alias.","acceptance_criteria":"Core orchestration lives outside cli.py; cli.py only parses args and delegates. report command remains functional as alias over shared core path.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-02-10T16:43:48.948244-06:00","created_by":"adambossy","updated_at":"2026-02-10T16:43:48.948244-06:00"}
{"id":"fly-6nt.1","title":"Create service-layer agent_run package and request/result types","description":"Add src/transactoid/services/agent_run/ with types.py, service.py, pipeline.py scaffolding and explicit DTOs for run requests, outputs, artifacts, and manifests.","acceptance_criteria":"New service package exists with typed request/result structures used by callers; no business logic added to cli.py.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-10T16:43:49.111007-06:00","created_by":"adambossy","updated_at":"2026-02-10T16:43:49.111007-06:00","dependencies":[{"issue_id":"fly-6nt.1","depends_on_id":"fly-6nt","type":"parent-child","created_at":"2026-02-10T16:43:49.112202-06:00","created_by":"adambossy"}]}
{"id":"fly-6nt.2","title":"Implement core AgentRunService execution flow","description":"Implement prompt resolution (prompt vs prompt_key), template variable injection, agent creation/execution, and result extraction in core service.","acceptance_criteria":"Service executes runs from --prompt and --prompt-key paths, returns typed results, and is independently invokable without cli-specific code.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-10T16:43:49.274529-06:00","created_by":"adambossy","updated_at":"2026-02-10T16:43:49.274529-06:00","dependencies":[{"issue_id":"fly-6nt.2","depends_on_id":"fly-6nt","type":"parent-child","created_at":"2026-02-10T16:43:49.2757-06:00","created_by":"adambossy"},{"issue_id":"fly-6nt.2","depends_on_id":"fly-6nt.1","type":"blocks","created_at":"2026-02-10T16:43:49.277041-06:00","created_by":"adambossy"}]}
{"id":"fly-6nt.3","title":"Implement output pipeline for md/html + target fanout","description":"Implement completion pipeline to generate markdown/html artifacts and route outputs to selected targets (r2 and/or local), including local-dir handling and defaults.","acceptance_criteria":"Defaults save md+html to r2; local target writes files into configured hidden directory; target and format toggles are respected.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-10T16:43:49.437878-06:00","created_by":"adambossy","updated_at":"2026-02-10T16:43:49.437878-06:00","dependencies":[{"issue_id":"fly-6nt.3","depends_on_id":"fly-6nt","type":"parent-child","created_at":"2026-02-10T16:43:49.439119-06:00","created_by":"adambossy"},{"issue_id":"fly-6nt.3","depends_on_id":"fly-6nt.1","type":"blocks","created_at":"2026-02-10T16:43:49.440553-06:00","created_by":"adambossy"}]}
{"id":"fly-6nt.4","title":"Add R2 trace artifact persistence and continuation","description":"Persist trace sqlite and run manifest to R2, add R2 download helper(s), and support resume via run-id with parent/child run chaining.","acceptance_criteria":"Each run stores trace.sqlite3 and manifest.json in R2; continuation by run-id restores prior trace/session and publishes a new run with parent_run_id.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-10T16:43:49.602589-06:00","created_by":"adambossy","updated_at":"2026-02-10T16:43:49.602589-06:00","dependencies":[{"issue_id":"fly-6nt.4","depends_on_id":"fly-6nt","type":"parent-child","created_at":"2026-02-10T16:43:49.603801-06:00","created_by":"adambossy"},{"issue_id":"fly-6nt.4","depends_on_id":"fly-6nt.1","type":"blocks","created_at":"2026-02-10T16:43:49.605236-06:00","created_by":"adambossy"}]}
{"id":"fly-6nt.5","title":"Add thin CLI command transactoid agent-run","description":"Add agent-run command in cli.py as a thin adapter: parse flags, build request object, call AgentRunService, print concise outcomes and exit codes.","acceptance_criteria":"CLI supports --prompt/--prompt-key/--continue, repeatable --email, output format toggles, output-target fanout, local-dir, and max-turns; orchestration remains outside cli.py.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-10T16:43:49.766765-06:00","created_by":"adambossy","updated_at":"2026-02-10T16:43:49.766765-06:00","dependencies":[{"issue_id":"fly-6nt.5","depends_on_id":"fly-6nt","type":"parent-child","created_at":"2026-02-10T16:43:49.76799-06:00","created_by":"adambossy"},{"issue_id":"fly-6nt.5","depends_on_id":"fly-6nt.2","type":"blocks","created_at":"2026-02-10T16:43:49.769452-06:00","created_by":"adambossy"},{"issue_id":"fly-6nt.5","depends_on_id":"fly-6nt.3","type":"blocks","created_at":"2026-02-10T16:43:49.770666-06:00","created_by":"adambossy"},{"issue_id":"fly-6nt.5","depends_on_id":"fly-6nt.4","type":"blocks","created_at":"2026-02-10T16:43:49.771814-06:00","created_by":"adambossy"}]}
{"id":"fly-6nt.6","title":"Refactor report command into compatibility alias","description":"Make transactoid report delegate into AgentRunService/agent-run path with spending-report preset behavior; remove duplicated report orchestration logic from cli.py/jobs/report where possible.","acceptance_criteria":"transactoid report behavior remains intact while reusing shared core service; report-specific duplication in cli.py is removed.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-10T16:43:49.934227-06:00","created_by":"adambossy","updated_at":"2026-02-10T16:43:49.934227-06:00","dependencies":[{"issue_id":"fly-6nt.6","depends_on_id":"fly-6nt","type":"parent-child","created_at":"2026-02-10T16:43:49.936061-06:00","created_by":"adambossy"},{"issue_id":"fly-6nt.6","depends_on_id":"fly-6nt.5","type":"blocks","created_at":"2026-02-10T16:43:49.93753-06:00","created_by":"adambossy"}]}
{"id":"fly-6nt.7","title":"Add tests for service, adapter, and CLI alias behavior","description":"Add/adjust tests for AgentRunService, output pipeline, R2 download+trace continuation, agent-run CLI parsing/delegation, and report alias delegation.","acceptance_criteria":"Tests cover prompt and prompt-key runs, continuation from run-id, output target matrix, and report alias wiring; test suite passes.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-10T16:43:50.098973-06:00","created_by":"adambossy","updated_at":"2026-02-10T16:43:50.098973-06:00","dependencies":[{"issue_id":"fly-6nt.7","depends_on_id":"fly-6nt","type":"parent-child","created_at":"2026-02-10T16:43:50.100231-06:00","created_by":"adambossy"},{"issue_id":"fly-6nt.7","depends_on_id":"fly-6nt.5","type":"blocks","created_at":"2026-02-10T16:43:50.101691-06:00","created_by":"adambossy"},{"issue_id":"fly-6nt.7","depends_on_id":"fly-6nt.6","type":"blocks","created_at":"2026-02-10T16:43:50.102923-06:00","created_by":"adambossy"}]}
